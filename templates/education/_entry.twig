{% extends "_layouts/default.twig" %}

{% block bodyTag %}
  {{ parent()|attr({
    class: 'bg-[#1D1D1D]'
  }) }}
{% endblock %}

{% set course_color = entry.courseColor %}

{% block content %}
{% block header %}{% include '_partials/header.twig' %}{% endblock %}
<div class="bg-white">
  <div class="max-w-screen-xl min-w-screen-xl mx-auto py-12 md:py-[80px] px-6 md:px-0">
    <img src="{{entry.courseHero.one().url}}" class="md:max-h-[360px] md:max-w-[800px] mx-auto" alt="{{entry.courseHero.one().alt}}" />
    <div class="mt-[50px] {% if entry.courseCalendar.all() != null %}grid grid-cols-1 md:flex md:flex-row gap-[58px]{% endif %}">
      <div class="{% if entry.courseCalendar.all() != null %}md:basis-2/3{% endif %}"><!--body-->
        <h2>{{entry.title}}</h2>
        <p>{{entry.courseDescription}}</p>
      </div>
      {% if entry.courseCalendar.all() != null %}
      <div class="md:basis-1/3"><!--right sidebar-->
      {% for course in craft.products.type(entry.slug).all() %}
          <div class="bg-errigal md:w-[404px] pl-[40px] pr-[20px] py-[35px] mb-[30px] border-t-[5px]
            {% switch entry.slug %}
              {% case 'cpim' %}
                {{'border-[#EA7600]'}}
              {% case 'cscp' %}
                {{'border-[#c8102e]'}}
              {% case 'cltd' %}
                {{'border-[#5f259f]'}}
              {% case 'ctsc' %}
                {{'border-[#00AAE7]'}}
              {% default %}
                {{'border-[#006B36]'}}
              {% endswitch %}">
            <div><!-- text -->
              <p class="mb-[10px] text-[24px] text-[#292929]">{{course.title}}</p>
              <p class="mb-[10px] font-bold text-[#006B36]">Starts {{course.courseDates.courseDate|date('F j')}}</p>
              <p class="font-light text-[#292929]">{{course.courseDescription}}</p>
            </div>
            <div class="mt-[10px] gap-[25px]">
              {% set variant = course.defaultVariant %}
              <form method="post" class="w-full inline-flex items-end justify-between">
                {{ csrfInput() }}
                {{ actionInput('commerce/cart/update-cart') }}
                {{ hiddenInput('purchasableId', variant.id) }}
                {{ redirectInput('shop/cart') }}
                {{ successMessageInput('Added ' ~ course.title ~ ' to cart.') }}
                {{ hiddenInput('qty', 1) }}

                <div>
                  <button class="h-max w-max bg-[#82C341] mt-[20px] pt-[9px] pb-[11px] pl-[20px] pr-[20px] text-white text-lg font-semibold">Register</button>
                </div>
              </form>
            </div>
          </div>
        {% endfor %}
      </div>
      {% endif %}
    </div>
  </div>
</div>
{% block apics_cta %}{% include '_partials/apics_cta.twig' %}{% endblock %}
{% block footer %}{% include '_partials/footer.twig' %}{% endblock %}
{% endblock %}
